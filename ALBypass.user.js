(function() {
   window.history.replaceState&&window.history.replaceState(null,null,window.location.href);var messageError,linkCantBypass,listOfAcceptDomains=GM_getValue("domains",""),retry=3,green_icon=GM_getValue("green_icon",""),grey_icon=GM_getValue("grey_icon",""),red_icon=GM_getValue("red_icon",""),autoFCB="auto(faucet|claim|bitco).(in|org)",gist_id="e6ed9bbe9feb74e71030c680feba9d71",delayOn=GM_getValue("delayOn","[]"),update_delayOn=GM_getValue("update_delayOn",!0);delayOn=JSON.parse(delayOn);function getIcons(){fetch("https://gist.githubusercontent.com/Harfho/63966e7f7145a5607e710a4cdcb31906/raw/ALBypass_icons.json").then(a=>a.ok?a.json():Promise.reject(a)).then(a=>{let b=a.green_icon,c=a.grey_icon,d=a.red_icon;GM_setValue("green_icon",b),GM_setValue("grey_icon",c),GM_setValue("red_icon",d)}).catch(a=>{console.log("can't get Icons because of ",a),window.location.reload(!1)})}0!=green_icon&&0!=grey_icon&&0!=red_icon||getIcons();function favicon(a){let b=document.createElement("link");b.href=a,b.rel="icon",b.type="image/png",document.getElementsByTagName("head")[0].appendChild(b)}function waitForKeyElements(a,b,c,d,f){void 0===c&&(c=!0),void 0===d&&(d=300),void 0===f&&(f=-1);var g="function"==typeof a?a():document.querySelectorAll(a),h=g&&0<g.length;h&&g.forEach(function(a){a.getAttribute("data-userscript-alreadyFound")||!1||(b(a)?h=!1:a.setAttribute("data-userscript-alreadyFound",!0))}),0===f||h&&c||(--f,setTimeout(function(){waitForKeyElements(a,b,c,d,f)},d))}function getdelayPages(){GM_xmlhttpRequest({method:"GET",url:"https://gist.github.com/Harfho/e6ed9bbe9feb74e71030c680feba9d71/raw/delaypage.txt?timestamp=' + (+new Date())",nocache:!0,revalidate:!0,onload:a=>{let b=a.responseText.replace(/[^\w\d.,-]/ig,"").split(",").filter(a=>a),c=b.map(a=>a.replace(/'/ig,"\"").toLowerCase());GM_setValue("delayOn",JSON.stringify(c))},onerror:()=>{}})}(!1==delayOn||!0==update_delayOn)&&(GM_setValue("update_delayOn",!1),getdelayPages());function delayHost(a){if(a=new URL(a).host,delayOn.includes(a))return!0}function update_delaypage(a=null){var b=GM_getValue("delayOn");b=JSON.parse(b);var c=atob("Z2hwXzFVMGhPMTFodTZ6eWxaZ0hMWW5qWFdMTjE1d3V5NjBZN0l6Rw==");c="Bearer "+c;const d=new Headers({accept:"application/vnd.github.v3+json",Authorization:c,"Content-Type":"application/json"});var e=JSON.stringify({files:{"delaypage.txt":{content:JSON.stringify(b)}}});fetch("https://api.github.com/gists/e6ed9bbe9feb74e71030c680feba9d71",{method:"PATCH",headers:d,body:e,redirect:"follow"}).then(a=>a.text()).then(()=>{console.log("Done",b),window.close()}).catch(a=>{console.log("error",a)});GM_notification({title:"!Bypass-- "+a,text:"push "+a+" to delaypage list on github",timeout:1e4,ondone:()=>{}})}function addDelayorClose(a){try{var b,c=/.*action is marked as suspicious.*/ig.test(a.innerText.toLowerCase()),d=/.*already visited this link.*/ig.test(a.innerText.toLowerCase());b=new URL(document.referrer).host}catch(a){b=""}if(c){delayOn=GM_getValue("delayOn"),delayOn=JSON.parse(delayOn);let a=GM_getValue("previousUrl","");b&&!1==delayOn.includes(b)?(delayOn.push(b),GM_setValue("delayOn",JSON.stringify(delayOn)),update_delaypage(b)):a&&!1==delayOn.includes(a)&&(delayOn.push(a),GM_setValue("delayOn",JSON.stringify(delayOn)),update_delaypage(a))}else window.close(),window.close(),window.close(),window.close()}function OnPhone(){GM_getValue("OnPhone")?GM_setValue("OnPhone",!1):GM_setValue("OnPhone",!0);window.location.reload()}function getSimilarWord(a,b){function c(a){let b=[];for(let c=0;c<a.length-1;c++)b.push(a[c]+a[c+1]);return b}function d(a,b){a=a.toLowerCase(),b=b.toLowerCase();const d=c(a),e=c(b);let f=[];for(let c=0;c<d.length;c++)-1<e.indexOf(d[c])&&f.push(d[c]);return f.length/Math.max(d.length,e.length)}return function(a,b,c=.3){let e=0,f=a;for(let g,h=0;h<b.length;h++)g=d(b[h],a),g>e&&(e=g,f=b[h]);return e>c?f:a}(a,b)}function updateAcceptDomain(){fetch("https://api.yuumari.com/alpha-bypass/domains/accept").then(a=>a.ok?a.json():Promise.reject(a)).then(a=>{var b=[];for(let c in a)b.push(...a[c]);GM_setValue("domains",JSON.stringify(b))}).catch(a=>{console.log("can't updateAcceptDomain because of ",a),window.location.reload(!1)})}function sendEmail(a,b,c){const d=atob("NDFjYWY3YmU4MWMwMmRiODIwOWQwNGE2Njg4YWVhZWE="),e=new Headers;e.append("Content-Type","application/json");var f=JSON.stringify({user_id:"user_oF6Z1O2ypLkxsb5eCKwxN",service_id:"gmail",accessToken:d,template_id:b,template_params:{username:"Harfho",from_name:"Harfho",to_name:a,message:c}});fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:e,body:f,redirect:"follow"}).then(a=>a.text()).then(a=>console.log(a)).catch(a=>console.log("error",a))}function update_DontOpen(a){function b(b){let c=b.responseText.replace(/'|"|\[|\]/ig,"").split(",").filter(a=>a);var d=c.map(a=>a.replace(/'/ig,"\"").toLowerCase()),e=atob("Z2hwXzFVMGhPMTFodTZ6eWxaZ0hMWW5qWFdMTjE1d3V5NjBZN0l6Rw==");e="Bearer "+e;const f=new Headers({accept:"application/vnd.github.v3+json",Authorization:e,"Content-Type":"application/json"});if(a&&!d.includes(a)){d.push(a.toLowerCase());var g=JSON.stringify({files:{"_DontOpen.txt":{content:JSON.stringify(d)}}});fetch("https://api.github.com/gists/e6ed9bbe9feb74e71030c680feba9d71",{method:"PATCH",headers:f,body:g,redirect:"follow"}).then(a=>a.text()).then(()=>{console.log("Done",d),window.close()}).catch(a=>{console.log("error",a)});let b=a+" "+messageError+" and was added to _DontOpen list on gist";GM_notification({title:"!Bypass-- "+linkCantBypass,text:b,timeout:1e4,ondone:()=>{}})}else{GM_notification({title:"!Bypass-- "+linkCantBypass,text:a+" is Already added to _DontOpen",timeout:1e4,ondone:()=>{}}),updateAcceptDomain(),setTimeout(()=>{window.close()},5e3)}}GM_xmlhttpRequest({method:"GET",url:"https://gist.github.com/Harfho/e6ed9bbe9feb74e71030c680feba9d71/raw/_DontOpen.txt?timestamp=' + (+new Date())",nocache:!0,revalidate:!0,onload:b})}function getDomainOrPathNameAndUpdate(a,b){GM_xmlhttpRequest({method:"GET",url:"https://gist.github.com/Harfho/e6ed9bbe9feb74e71030c680feba9d71/raw/shortlinks_name.txt?timestamp=' + (+new Date())",fetch:!0,nocache:!0,onload:function(c){let d=c.responseText.replace(/'|"|\[|\]|\s/ig,"").split(",").filter(a=>a);var e=d.map(a=>a.replace(/'/ig,"\"").toLowerCase());let f,g=window.location.href.toLowerCase(),h=document.title.toLowerCase().trim(),i=new URL(a).host.replace(/\..*/ig,""),j=g.split("/").splice(2,2),k=getSimilarWord(j[0],e);/.*unsupported url.*/ig.test(b)?j.push(h,i,k):j.push(h,i);let l=j.some(a=>(f=a,e.includes(a)));if(!l)/dontopen/ig.test(b)&&(i=getSimilarWord(i,e),update_DontOpen(i)),/.*unsupported url.*/ig.test(b)&&e.includes(i)&&(messageError="shortlink url was changed",linkCantBypass=a,update_DontOpen(i));else if(/.*dontopen.*/ig.test(b)&&(f=getSimilarWord(f,e),update_DontOpen(f)),/.*unsupported url.*/ig.test(b)&&e.includes(f)){messageError="shortlink url was changed",linkCantBypass=a,update_DontOpen(f);sendEmail("Yuumari.com","shortlinks_vicissitude","Cant Bypass "+a)}}})}function bypass(a){favicon(green_icon);let b=new URL(a).host;document.title=b,GM_setValue("previousUrl",b);const c=atob(GM_getResourceText("key").match(/\w*/gi).filter(a=>""!=a)[0]),d=a;fetch("https://api.yuumari.com/alpha-bypass/",{method:"POST",body:new URLSearchParams({u:c,l:d})}).then(a=>{if(console.log(a.status),!a.ok)throw console.log("Network response was not OK - HTTP status "+a.status),new Error("Network response was not OK - HTTP status "+a.status);return a.json()}).then(b=>{let c=b.message;if(!c){sessionStorage.removeItem("tryagain");let c=document.title,d=a=>0==a?void(window.location.href=b.result):(document.title=a+"-"+c,setTimeout(()=>{d(--a)},1e3));delayHost(a)?d(17):d(0)}else{favicon(red_icon);let e;if(e=sessionStorage.getItem("tryagain"),null==sessionStorage.getItem("tryagain")&&(sessionStorage.setItem("tryagain",1),e=sessionStorage.getItem("tryagain")),parseInt(e)<=retry)sessionStorage.setItem("tryagain",parseInt(e)+1),setTimeout(()=>{window.location.reload(!1)},2e3);else{let e=new URL(d).host;sessionStorage.removeItem("tryagain"),console.log(b.message);if(/pattern changed|unsupported domain|not found|failed to get document|invalid path|invalid domain/ig.test(c)){messageError=c,linkCantBypass=a;sendEmail("Yuumari.com","shortlinks_vicissitude","Cant Bypass "+a+" because of "+c),getDomainOrPathNameAndUpdate(a,"dontopen")}else if(/ticket has expired/ig.test(c)){sendEmail("Harfho","api_issue",c+" Get New API key previous api key as expired")}else if(/ticket locked/ig.test(c)){sendEmail("Harfho","api_issue",c+"You have use more than 2 IPs to access Yuumari.com,Wait for 24Hour for API key to continue working")}else if(/leeched max count/ig.test(c)){console.log(c+"The limit on the number of requests has been exceeded 2 queries per 1sec."),setTimeout(()=>{window.location.reload(!1)},1e3)}else{GM_notification({title:"!Bypass-- "+e,text:c+"--"+a,timeout:10000,ondone:()=>{window.close()}}),GM_setClipboard(a,{type:"text/plain"}),window.close()}}}}).catch(b=>{favicon(grey_icon),console.error(b);let c=new URL(a).host;console.log("can't bypass "+c+" because of",b);let d;d=sessionStorage.getItem("recheck"),null==sessionStorage.getItem("recheck")&&(sessionStorage.setItem("recheck",1),d=sessionStorage.getItem("recheck")),parseInt(d)<=retry?(sessionStorage.setItem("recheck",parseInt(d)+1),setTimeout(window.location.reload(!1),5e3)):(favicon(red_icon),document.title=b+":"+new URL(a).host,sessionStorage.removeItem("recheck"))})}if(GM_registerMenuCommand("OnPhone-"+GM_getValue("OnPhone",""),OnPhone,"OnPhone"),!listOfAcceptDomains)updateAcceptDomain();else if(listOfAcceptDomains.includes(window.location.host)&&!/\/===$/.test(window.location.href)){let a=window.location.href;document.title=new URL(a).host,bypass(a)}else if(/\/===$/.test(window.location.href)){if(/megaurl.in\/bypass=/.test(window.location.href)){let a=window.location.pathname.replace(/.*bypass=/,"").replace(/\/===/ig,"");document.title=new URL(a).host,bypass(a)}else{let a=window.location.href.replace(/\/===/ig,"");bypass(a)}}else if(/auto(faucet|claim|bitco).(in|org)\/dashboard$/ig.test(window.location.href))localStorage.removeItem("close"),localStorage.clear();else if(/auto(faucet|claim|bitco).(in|org)\/dashboard\/shortlinks$/ig.test(window.location.href))waitForKeyElements("div.alert-danger",a=>{addDelayorClose(a)}),"true"==localStorage.getItem("close")&&(window.close(),window.close(),window.close(),window.close(),window.close(),window.close()),GM_getValue("OnPhone","")&&(window.close(),window.close(),window.close(),window.close());else if(/auto(faucet|claim|bitco).(in|org)/ig.test(window.location.host)){var error=document.querySelector("#cf-error-details"),time=60000;error&&/Error 5../ig.test(error.innerText)&&(document.title="R-"+document.title,window.setTimeout(window.location.reload(!1),time))}else{let a=window.location.href;updateAcceptDomain(),getDomainOrPathNameAndUpdate(a,"unsupported url")}
})();
